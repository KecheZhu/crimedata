[["index.html", "An Analysis on NYC Crime Data Chapter 1 Introduction", " An Analysis on NYC Crime Data Tianhao Wu &amp; Kechengjie Zhu 2021-12-12 Chapter 1 Introduction "],["data-sources.html", "Chapter 2 Data sources", " Chapter 2 Data sources "],["data-transformation.html", "Chapter 3 Data transformation", " Chapter 3 Data transformation For crime data of all types from 2017 to 2021, we performed the following steps to clean the data: Select out and rename the columns of data we are interested in: Precinct, Date, Type of Crime, and Subtype of Crime. Find out corresponding Borough based on Precinct The final output csv consists of the above 5 features while each row represents a crime reported. The following code demonstrates the workflow we applied to crime data in 2021. We also applied the same workflow to the data in 2017 - 2020 separately in order to save space. df &lt;- read_csv(&quot;NYPD_Complaint_Data_Current__Year_To_Date_.csv&quot;, show_col_types = FALSE) old_names &lt;- c(&#39;ADDR_PCT_CD&#39;, &#39;CMPLNT_FR_DT&#39;, &#39;LAW_CAT_CD&#39;, &#39;OFNS_DESC&#39;) new_names &lt;- c(&#39;pct&#39;, &#39;date&#39;, &#39;level&#39;, &#39;type&#39;) df &lt;- df[,old_names] names(df) &lt;- new_names df$month &lt;- unlist(lapply(df$date, function(x) as.numeric(str_split(x, &#39;/&#39;)[[1]][1]))) df$year &lt;- unlist(lapply(df$date, function(x) as.numeric(str_split(x, &#39;/&#39;)[[1]][3]))) df &lt;- df[df$year == 2021,] find_boro &lt;- function(pct){ if (pct %in% c(40,41,42,43,44,45,46,47,48,49,50,52)) { return(&#39;BRONX&#39;) } else if (pct %in% c(60,61,62,63,66,67,68,69,70,71,72,73,75,76,77,78,79,81,83,84,88,90,94)) { return(&#39;BROOKLYN&#39;) } else if (pct %in% c(1,5,6,7,9,10,13,14,17,18,19,20,22,23,24,25,26,28,30,32,33,34)) { return(&#39;MANHATTAN&#39;) } else if (pct %in% c(100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115)) { return(&#39;QUEENS&#39;) } else if (pct %in% c(120,121,122,123)) { return(&#39;STATEN ISLAND&#39;) } } df$borough &lt;- unlist(lapply(df$pct, function(x) find_boro(x))) write.csv(df,&quot;crime_21.csv&quot;) For park crime data from 2017 to 2021, we performed the following steps to clean the data: Use the same naming of columns for all files Fix data types Aggregate rows based on boroughs and compute the number of parks for each borough Specify quarter and year Combine park crime in all quarters from 2017 to 2021 into one single csv agg &lt;- function(df, q, y){ names(df) &lt;- c(&#39;PARK&#39;, &#39;BOROUGH&#39;, &#39;SIZE (ACRES)&#39;, &#39;CATEGORY&#39;, &#39;MURDER&#39;, &#39;RAPE&#39;, &#39;ROBBERY&#39;, &#39;FELONY ASSAULT&#39;, &#39;BURGLARY&#39;, &#39;GRAND LARCENY&#39;, &#39;GRAND LARCENY OF MOTOR VEHICLE&#39;, &#39;TOTAL&#39;) df &lt;- df[1:(nrow(df)-2),] features &lt;- c(&#39;MURDER&#39;, &#39;RAPE&#39;, &#39;ROBBERY&#39;, &#39;FELONY ASSAULT&#39;, &#39;BURGLARY&#39;, &#39;GRAND LARCENY&#39;, &#39;GRAND LARCENY OF MOTOR VEHICLE&#39;, &#39;TOTAL&#39;) df[,features] &lt;- lapply(df[,features], function(x) as.numeric(x)) df &lt;- df %&gt;% mutate(num_parks = 1) df &lt;- as_tibble(aggregate(x = df[,c(features,c(&#39;num_parks&#39;))], by = list(df$BOROUGH), FUN = sum)) names(df)[1] &lt;- &#39;BOROUGH&#39; df$QUARTER &lt;- q df$YEAR &lt;- y return(df) } # q1_17 represents the data in the first quarter of 2017 df &lt;- agg(q1_17, 1, 2017) df &lt;- rbind(df, agg(q2_17, 2, 2017)) df &lt;- rbind(df, agg(q3_17, 3, 2017)) df &lt;- rbind(df, agg(q4_17, 4, 2017)) df &lt;- rbind(df, agg(q1_18, 1, 2018)) df &lt;- rbind(df, agg(q2_18, 2, 2018)) df &lt;- rbind(df, agg(q3_18, 3, 2018)) df &lt;- rbind(df, agg(q4_18, 4, 2018)) df &lt;- rbind(df, agg(q1_19, 1, 2019)) df &lt;- rbind(df, agg(q2_19, 2, 2019)) df &lt;- rbind(df, agg(q3_19, 3, 2019)) df &lt;- rbind(df, agg(q4_19, 4, 2019)) df &lt;- rbind(df, agg(q1_20, 1, 2020)) df &lt;- rbind(df, agg(q2_20, 2, 2020)) df &lt;- rbind(df, agg(q3_20, 3, 2020)) df &lt;- rbind(df, agg(q4_20, 4, 2020)) df &lt;- rbind(df, agg(q1_21, 1, 2021)) df &lt;- rbind(df, agg(q2_21, 2, 2021)) df &lt;- rbind(df, agg(q3_21, 3, 2021)) write.csv(df,&quot;park_crime.csv&quot;) "],["missing-values.html", "Chapter 4 Missing values", " Chapter 4 Missing values Here is the function for plotting missing values Both the raw data files and the transformed data files do not contain missing values. The first reason is that these data are safety related, so they are well documented in detail. The other reason is that the features/columns we are interested in are quite common, such as precinct, borough,crime type, and crime subtype. There are some columns in raw data that contain missing values, but we don’t care about those columns. Moreover, the size of raw data is too large to present here. Therefore, we decided to demonstrate one of the data samples we used for analysis: park crime data. The first plot shows “count of missing values” while the second plot shows “percentage of missing values”. "],["results.html", "Chapter 5 Results", " Chapter 5 Results 5.0.1 Annual Pattern of Major Crime Types Firstly, we wanted to visualize the patterns of three major types of crimes in NYC: Felony, Misdemeanor, and Violation. We plotted the daily crime counts from 2017 to 2021, and we were curious about: What is the annual pattern of different types of crime? Does the pattern fluctuates over years? Observations &amp; Analysis: There is a clear and stable annual pattern from 2017 to 2019: crime counts first increase and reach the highest level in the middle of a year. Then they gradually decrease to their original level at the beginning of each year. The average level of crime counts is stable over years. All three types of crime follow the pattern. However, the level of Misdemeanor at the very beginning of each year is dramatically high, and it drops to its normal level within a few days. There is a sharp decline of crime counts around March 2020. Although the annual pattern of “first increase then decrease” still holds after that, the overall level of crime counts has been increasing since then. We think that the pattern shown in 2017 - 2019 is the normal pattern while the fluctuations in 2020 and 2021 might be caused by COVID-19. The crime counts of Felony reach the highest level in 5 years soon after the steep decrease in March 2020. 5.0.2 Crime Counts vs COVID-19 New Cases Here we plotted the daily crime counts in 2020 and 2021 together with COVID daily new cases in NYC to explore the impacts of COVID-19 on crime counts. Observations &amp; Analysis: The steep decrease in crime counts happens soon after COVID-19 breaks out in NYC. As COVID daily new cases reach the first peak and start to decrease, crime counts raise up. However, as COVID-19 breaks out again in 2021, there is little fluctuation in crime counts. Our analysis is that: human activities were severely constrained due to the breakout of COVID-19, which led to the sharp decrease in crime counts. As the situation got better and people became active again, crime counts raised back to their original levels as a result. Since vaccines became available at the beginning of 2021 and people had already adapted to the existence of COVID-19, the second breakout of COVID had little impact on human activities including criminal behaviors. 5.0.3 Felony Counts vs COVID-19 New Cases The plots above could not explain the sharp increase in Felony counts after the first breakout of COVID-19. Therefore, we decided to dive into the relationship between Felony Counts and COVID Cases. We started with analyzing the patterns of Felony Counts in different boroughs. Observations &amp; Analysis: From the plot we can see that the breakout of COVID-19 has little impact on the felony counts in Staten island. Although there is an increase in the other 4 boroughs, only the felony counts in Manhattan boom to a dramatically high level. Observations &amp; Analysis: From the plot of different felony types we can see that the sharp increase is mainly contributed by “Burglary”. Synthesizing the findings we have, we conclude that: the breakout of COVID-19 greatly constrained human activities and therefore caused economic difficulties for many people. As a result, some people would commit crimes once the situation got better. Burglary is one of the most straightforward way to get money and Manhattan is the richest borough in NYC. Therefore, most criminals chose to commit burglaries in Manhattan. 5.0.4 Park Crime Park Crime dataset consists of the counts of 7 major felonies that happened in parks and corresponding time and location information. Due to its outdoor nature, we believe that park crime should be highly correlated with seasons. Here we plotted the park crime counts in each quarter. Observations &amp; Analysis: From the plots we could see that park crime does have a very strong correlation with seasons. The count in the third quarter (summer) is the highest while the count in winter is the lowest, which is aligned with the pattern of human activities. Grand Larceny contributes to the largest portion of park crime counts and Robbery is the second. Among the 5 boroughs, Manhattan has the highest level of park crime counts. The breakout of COVID-19 also led to a sharp decrease in park crime counts, but was not followed up with a sharp increase. We think the reason is that human activities in many parks were still quite constrained even after the situation became better. "],["interactive-component.html", "Chapter 6 Interactive component", " Chapter 6 Interactive component "],["conclusion.html", "Chapter 7 Conclusion", " Chapter 7 Conclusion "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
